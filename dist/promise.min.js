!function(a){"use strict";var b={PENDING:0,FULFILLED:1,REJECTED:2},c=function(a){return null!==a&&"object"==typeof a},d=function(a){return"function"==typeof a},e=function(a){var c=b.PENDING,e=null;this.reactions=[],this.getState=function(){return c},this.setState=function(a,d){return c===b.PENDING?(c=a,e=d,!0):!1},this.getResult=function(){return e},d(a)&&f(a,this.resolve.bind(this),this.reject.bind(this))},f=function(a,b,c){var d=!1;try{a(function(a){d===!1&&(d=!0,b(a))},function(a){d===!1&&(d=!0,c(a))})}catch(e){d===!1&&c(e)}};e.cast=function(a){return c(a)&&a instanceof e?a:(new e).resolve(a)},e.resolve=function(a){return(new e).resolve(a)},e.reject=function(a){return(new e).reject(a)},e.all=function(a){return new e(function(b,c){for(var d=a.length,e=[],f=function(a){return function(c){e[a]=c,0===--d&&b(e)}},g=function(a){d=0,c(a)},h=0;h<a.length;h++)a[h].then(f(h),g)})},e.race=function(a){return new e(function(b,c){for(var d=!0,e=function(a){d&&(d=!1,b(a))},f=function(a){d&&(d=!1,c(a))},g=0;g<a.length;g++)a[g].then(e,f)})},e.prototype.resolve=function(a){try{if(a===this)throw new TypeError("Return value cannot refer to the same promise!");if(c(a)||d(a)){var e=a.then;if(d(e))return f(e.bind(a),this.resolve.bind(this),this.reject.bind(this)),this}this.setState(b.FULFILLED,a)&&this.notify()}catch(g){this.reject(g)}return this},e.prototype.reject=function(a){return this.setState(b.REJECTED,a)&&this.notify(),this},e.prototype.notify=function(){for(var a,b=this.getResult(),c=this.getState();this.reactions.length;)a=this.reactions.shift(),g(a,c,b)};var g=function(a,c,d){var e=a.promise,f=c===b.FULFILLED,g=f?"onFulfilled":"onRejected",h=a[g];setTimeout(function(){try{"function"==typeof h?(d=h(d),e.resolve(d)):f?e.resolve(d):e.reject(d)}catch(a){e.reject(a)}},0)};e.prototype.then=function(a,c){var d=new e;return this.reactions.push({promise:d,onFulfilled:a,onRejected:c}),this.getState()!==b.PENDING&&this.notify(),d},e.prototype.catch=function(a){return this.then(void 0,a)},"object"==typeof module&&"object"==typeof module.exports?module.exports=e:a.Promise=e}(this);
//# sourceMappingURL=promise.min.map